<!DOCTYPE html>
<html lang="he" dir="rtl">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>住驻专转 专转</title>
  <style>
    body {
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      height: 100vh;
      display: flex;
      flex-direction: column;
      justify-content: space-between;
      align-items: center;
      overflow: hidden;
    }

    .digit-container {
      flex: 1;
      display: flex;
      justify-content: center;
      align-items: center;
      width: 100%;
    }

    .digit-display {
      font-size: 15rem;
      font-weight: bold;
      color: white;
      text-shadow: 0 0 30px rgba(255, 255, 255, 0.5);
      transition: all 0.3s ease;
      user-select: none;
    }

    .digit-display.animate {
      transform: scale(1.2);
      text-shadow: 0 0 50px rgba(255, 255, 255, 0.8);
    }

    .button-container {
      padding: 60px 20px;
      width: 100%;
      display: flex;
      flex-direction: column;
      align-items: center;
      gap: 15px;
    }

    .generate-btn {
      background: linear-gradient(45deg, #ff6b6b, #ee5a24);
      border: none;
      border-radius: 50px;
      color: white;
      font-size: 1.5rem;
      font-weight: bold;
      padding: 20px 40px;
      cursor: pointer;
      box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
      transition: all 0.3s ease;
      user-select: none;
      min-width: 200px;
    }

    .generate-btn:hover {
      transform: translateY(-3px);
      box-shadow: 0 15px 40px rgba(0, 0, 0, 0.4);
    }

    .read-btn {
      background: linear-gradient(45deg, #4ecdc4, #44a08d);
      border: none;
      border-radius: 50px;
      color: white;
      font-size: 1.3rem;
      font-weight: bold;
      padding: 15px 30px;
      cursor: pointer;
      box-shadow: 0 8px 25px rgba(0, 0, 0, 0.3);
      transition: all 0.3s ease;
      user-select: none;
      min-width: 160px;
      opacity: 0;
      transform: translateY(20px);
      visibility: hidden;
    }

    .read-btn.show {
      opacity: 1;
      transform: translateY(0);
      visibility: visible;
    }
  </style>
</head>
<body>
  <div class="digit-container">
    <div id="digitDisplay" class="digit-display">
      <div class="welcome-text">抓 注 驻转专 住驻专 专转</div>
    </div>
  </div>

  <div class="button-container">
    <button id="generateBtn" class="generate-btn" onclick="generateRandomDigit()">
      住驻专 专转
    </button>
    
    <button id="readBtn" class="read-btn" onclick="playAudio()">
       拽专
    </button>
  </div>

  <script>
    let isFirstClick = true;
    let currentDigit = null;

    let fontClasses = []; // 注 志fonts.txt
    fetch("fonts.txt")
      .then(res => res.text())
      .then(text => {
        fontClasses = text.split(",").map(f => f.trim().replace(/['"]+/g, ""));
      })
      .catch(err => console.error("砖 注转 fonts.txt:", err));

    // 住专 爪注 注 专拽注 拽
    const sequenceColors = [
      {color: "#ff6b6b", background: "#6a6fd5"},
      {color: "#ffbe76", background: "#ff6b6b"},
      {color: "#f6e58d", background: "#ffbe76"},
      {color: "#44a08d", background: "#f6e58d"},
      {color: "#4ecdc4", background: "#44a08d"},
      {color: "#686de0", background: "#4ecdc4"},
      {color: "#ff7979", background: "#686de0"},
      {color: "#e056fd", background: "#ff7979"},
      {color: "#ff7979", background: "#e056fd"},
      {color: "#ffbe76", background: "#ff7979"},
      {color: "#f6e58d", background: "#ffbe76"},
      {color: "#ffbe00", background: "#f6e58d"},
      {color: "rainbow", background: "#ffbe00"}
    ];

    let currentColorIndex = 0;
    let colorClickCounter = 0;

    function getNextColor(){
      const colorObj = sequenceColors[currentColorIndex];
      colorClickCounter++;
      if(colorClickCounter >= 10){
        colorClickCounter = 0;
        currentColorIndex++;
        if(currentColorIndex >= sequenceColors.length) currentColorIndex = 0;
      }
      return colorObj;
    }

    function getRandomDigit() {
      return Math.floor(Math.random() * 10);
    }

    function getRandomFont() {
      if (fontClasses.length === 0) return "";
      const randomIndex = Math.floor(Math.random() * fontClasses.length);
      return fontClasses[randomIndex];
    }

    function generateRandomDigit() {
      const digitDisplay = document.getElementById('digitDisplay');
      const generateBtn = document.getElementById('generateBtn');
      const readBtn = document.getElementById('readBtn');

      if (isFirstClick) {
        digitDisplay.innerHTML = '';
        isFirstClick = false;
      }

      generateBtn.disabled = true;

      const randomDigit = getRandomDigit();
      currentDigit = randomDigit;

      const randomFont = getRandomFont();
      const {color, background} = getNextColor();

      // 爪注 专
      if (color !== "rainbow") {
        digitDisplay.className = 'digit-display animate ' + randomFont;
        digitDisplay.style.color = color;
        document.body.style.background = background;
      } else {
        // 拽砖转 注
        digitDisplay.className = 'digit-display animate ' + randomFont;
        digitDisplay.style.color = "transparent";
        digitDisplay.style.backgroundImage = "linear-gradient(90deg, red, orange, yellow, green, blue, indigo, violet)";
        digitDisplay.style.webkitBackgroundClip = "text";
        digitDisplay.style.backgroundClip = "text";
        document.body.style.background = "#ffbe00"; // 专拽注 砖 爪注 拽
      }

      digitDisplay.textContent = randomDigit;

      readBtn.classList.add('show');

      setTimeout(() => {
        digitDisplay.classList.remove('animate');
        generateBtn.disabled = false;
      }, 300);
    }

    function playAudio() {
      if (currentDigit === null) return;
      const readBtn = document.getElementById('readBtn');
      readBtn.disabled = true;

      const audio = new Audio(`${currentDigit}.mp3`);
      audio.play().finally(() => readBtn.disabled = false);
    }
  </script>
</body>
</html>
