<!DOCTYPE html>
<html lang="he">
<head>
  <meta charset="UTF-8">
  <title>קורא מספרים</title>
  <style>
    body {
      text-align: center;
      font-size: 48px;
      transition: background 0.5s, color 0.5s;
      margin-top: 100px;
    }
    #number {
      font-size: 120px;
      margin: 20px;
    }
    button {
      font-size: 24px;
      padding: 10px 20px;
      cursor: pointer;
    }
    /* מחלקות מיוחדות לאנימציות */
    .rainbow {
      background: linear-gradient(270deg, red, orange, yellow, green, blue, indigo, violet);
      background-size: 1400% 1400%;
      animation: rainbow 10s ease infinite;
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
    }
    @keyframes rainbow {
      0%{background-position:0% 50%}
      50%{background-position:100% 50%}
      100%{background-position:0% 50%}
    }
  </style>
</head>
<body>
  <div id="number">0</div>
  <button onclick="nextNumber()">הקרא</button>

  <script>
    let current = 0;
    let clickCount = 0;

    // רשימת צבעים + רקעים (כל אחד נשאר ל־10 לחיצות)
    const colorCycle = [
      {color: "#ff6b6b", background: "#6a6fd5"}, // אדום/כתום – רקע: סגול
      {color: "#ffbe76", background: "#ff6b6b"}, // כתום/צהוב – רקע: אדום
      {color: "#f6e58d", background: "#ffbe76"}, // צהוב – רקע: כתום
      {color: "#44a08d", background: "#f6e58d"}, // ירוק כהה – רקע: צהוב
      {color: "#4ecdc4", background: "#44a08d"}, // טורקיז – רקע: ירוק
      {color: "#686de0", background: "#4ecdc4"}, // כחול סגול – רקע: טורקיז
      {color: "#ff7979", background: "#686de0"}, // ורוד – רקע: כחול
      {color: "#e056fd", background: "#ff7979"}, // סגול – רקע: ורוד
      {color: "#ff7979", background: "#e056fd"}, // ורוד – רקע: סגול
      {color: "#ffbe76", background: "#ff7979"}, // ארד – רקע: ורוד
      {color: "#f6e58d", background: "#ffbe76"}, // כסף – רקע: ארד
      {color: "#ffbe00", background: "#f6e58d"}, // זהב – רקע: כסף
      {color: "rainbow", background: "#ffbe00"}  // קשת בענן – רקע: זהב
    ];

    let fonts = [];

    // טעינת הפונטים מ־fonts.txt
    fetch('fonts.txt')
      .then(r => r.text())
      .then(txt => {
        fonts = txt.split('\n').map(l => l.trim()).filter(l => l.length > 0);
      });

    function applyRandomFont() {
      if (fonts.length === 0) return;

      const randomFont = fonts[Math.floor(Math.random() * fonts.length)];

      // מוסיפים את ההגדרה כ־<style> אם לא קיים
      if (!document.getElementById(randomFont)) {
        const style = document.createElement("style");
        style.id = randomFont;
        style.textContent = randomFont;
        document.head.appendChild(style);
      }

      // שם המחלקה מתוך ההגדרה (למשל .font-franklin → font-franklin)
      const cls = randomFont.split('{')[0].trim().replace('.', '');
      document.body.className = cls;
    }

    function applyColor() {
      const index = Math.floor(clickCount / 10) % colorCycle.length;
      const scheme = colorCycle[index];
      const numberEl = document.getElementById("number");

      if (scheme.color === "rainbow") {
        numberEl.className = "rainbow";
        document.body.style.background = scheme.background;
      } else {
        numberEl.className = "";
        numberEl.style.color = scheme.color;
        document.body.style.background = scheme.background;
      }
    }

    function nextNumber() {
      current++;
      clickCount++;

      document.getElementById("number").textContent = current;
      applyColor();
      applyRandomFont();

      // לנגן קובץ mp3 אם יש
      const audio = new Audio(current % 10 + ".mp3");
      audio.play();
    }
  </script>
</body>
</html>
